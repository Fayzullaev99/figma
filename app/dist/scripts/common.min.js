"use strict";

// nav 
var navToggleElements = document.querySelectorAll('.header__btn, .header__content'),
    navControlElements = document.querySelectorAll('.header__btn, .header__content__close');
navControlElements.forEach(function (btn) {
  return btn.addEventListener('click', function () {
    return navToggleElements.forEach(function (el) {
      return el.classList.toggle('open');
    });
  });
}); // video

var video = document.querySelector('.feature__video'),
    current = document.getElementById('current'),
    duration = document.getElementById('duration'),
    playIcon = document.querySelector('.feature__videos__icon'),
    playPause = document.querySelector('.feature__controls__bottom__play'),
    restart = document.querySelector('.feature__controls__bottom__restart'),
    prevSpeed = document.querySelector('.feature__controls__bottom__prev-speed'),
    nextSpeed = document.querySelector('.feature__controls__bottom__next-speed'),
    speed = document.querySelector('.feature__videos__speed'),
    prevNext = document.querySelectorAll('.feature__controls__bottom__prev, .feature__controls__bottom__next'),
    videoControls = document.querySelector('.feature__controls'),
    videoBlock = document.querySelector('.feature__videos'),
    videoClose = document.querySelector('.feature__videos__close'),
    videoLine = document.querySelector('.feature__controls__line'),
    videoProgress = document.querySelector('.feature__controls__progress'),
    videoRuler = document.querySelector('.feature__controls__progress-ruler'),
    volumeChange = document.querySelector('.feature__controls-volume__icon'),
    volumeLine = document.querySelector('.feature__controls-volume__line'),
    volumeProgress = document.querySelector('.feature__controls-volume__progress'),
    volumeRuler = document.querySelector('.feature__controls-volume__ruler'); // video time

function changeTime(time) {
  var noll = function noll(num) {
    return num < 10 ? '0' + num : num;
  };

  var hour = Math.trunc(time / 3600);
  time -= hour * 3600;
  var minute = Math.trunc(time / 60);
  time -= minute * 60;
  time = Math.trunc(time);
  return "".concat(hour, ":").concat(noll(minute), ":").concat(noll(time));
}

function videoDuration() {
  return duration.innerHTML = changeTime(video.duration);
}

function videoCurrent() {
  setInterval(function () {
    current.innerHTML = changeTime(video.currentTime);
  }, 1000);
} // video playPause


playPause.addEventListener('click', function () {
  videoPlay();
});
playIcon.addEventListener('click', function () {
  videoPlay();
});
video.addEventListener('click', function () {
  videoPlay();
});

video.onended = function () {
  start();
};

function videoPlay() {
  playPause.classList.toggle('paused');

  if (video.paused === true) {
    video.play();
    videoDuration();
    videoCurrent();
    playIcon.style.zIndex = '-1';
  } else {
    video.pause();
    clearInterval(videoCurrent());
    playIcon.style.zIndex = '1';
  }
} // video stop


restart.addEventListener('click', function () {
  start();
});

function start() {
  video.currentTime = 0;
  video.pause();
  playPause.classList.remove('paused');
  speed.style.opacity = 0;
  video.playbackRate = 1;
} // videoSpeed


prevSpeed.addEventListener('click', function () {
  playDownSpeed();
});
nextSpeed.addEventListener('click', function () {
  playUpSpeed();
});

function playDownSpeed() {
  if (video.playbackRate > 0) {
    video.playbackRate -= 0.25;
    speed.innerHTML = video.playbackRate;
  }

  if (video.playbackRate === 0) {
    video.playbackRate = 1;
    speed.innerHTML = video.playbackRate;
  }

  if (video.playbackRate === 1) {
    speed.style.opacity = 0;
  } else {
    speed.style.opacity = 1;
  }
}

function playUpSpeed() {
  if (video.playbackRate < 2) {
    video.playbackRate += 0.25;
    speed.innerHTML = video.playbackRate;
  }

  if (video.playbackRate === 2) {
    video.playbackRate = 1;
    speed.innerHTML = video.playbackRate;
  }

  if (video.playbackRate === 1) {
    speed.style.opacity = 0;
  } else {
    speed.style.opacity = 1;
  }
} // video prev-next


prevNext.forEach(function (el) {
  el.addEventListener('click', function (e) {
    if (e.target.getAttribute("id") === 'prev') {
      // video.previous();
      console.log(e.target.getAttribute("id"));
      alert('you have not prev video');
    }

    if (e.target.getAttribute("id") === 'next') {
      // video.next();
      alert('you have not next video');
    }
  });
}); // video volume

volumeChange.onclick = function () {
  return video.muted = !video.muted;
};

var volumeIcons = ['up', 'slash', 'down', 'normal', 'off', 'mute'];

video.onvolumechange = function () {
  var volume = video.volume * 100;
  volumeProgress.style.width = video.volume * 100 + '%';
  volumeIcons.forEach(function (volumeIcon) {
    return volumeChange.classList.remove(volumeIcon);
  });

  if (video.muted) {
    volumeChange.classList.add('slash');
  } else if (volume > 75) {
    volumeChange.classList.add('up');
  } else if (volume > 50) {
    volumeChange.classList.add('normal');
  } else if (volume > 25) {
    volumeChange.classList.add('down');
  } else if (volume > 0) {
    volumeChange.classList.add('off');
  } else if (volume === 0) {
    volumeChange.classList.add('mute');
  }
};

volumeLine.addEventListener('click', function (e) {
  if (e.target !== volumeRuler) {
    video.volume = e.offsetX / 100;
  }
}); // volume progress

volumeRuler.addEventListener('mousedown', function (e) {
  if (e.clientX >= volumeLine.offsetLeft && e.clientX <= volumeLine.offsetLeft + volumeLine.clientWidth) {
    video.volume = (e.clientX - volumeLine.offsetLeft) / 100;
  }
});
window.addEventListener('mouseup', function () {
  window.onmousemove = null;
}); // video volume range
// I have not used from range. you can use it. it is ready for work. If you am going to swich on it. please remove all notes. attention!!! you do all old codes to note which "volume__line, volume__progress, volume__ruler" in feature.pug
// videoVolume.addEventListener('change',(e)=>{
//   video.volume = e.currentTarget.value / 100
// })
// // video progress

video.addEventListener('timeupdate', function () {
  var ProPos = video.currentTime / video.duration;
  videoProgress.style.width = ProPos * 100 + '%';
});
videoLine.addEventListener('click', function (e) {
  var scrubTime = e.offsetX / videoLine.offsetWidth * video.duration;
  video.currentTime = scrubTime;
}); // video fullscreen

video.addEventListener('dblclick', function () {
  videoBlock.requestFullscreen();
  videoClose.style.opacity = '1';
  videoClose.style.zIndex = '1';
});
videoClose.addEventListener('click', function () {
  document.exitFullscreen();
  videoClose.style.opacity = '0';
  videoClose.style.zIndex = '-1';
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJuYXZUb2dnbGVFbGVtZW50cyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIm5hdkNvbnRyb2xFbGVtZW50cyIsImZvckVhY2giLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwiZWwiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJ2aWRlbyIsInF1ZXJ5U2VsZWN0b3IiLCJjdXJyZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJkdXJhdGlvbiIsInBsYXlJY29uIiwicGxheVBhdXNlIiwicmVzdGFydCIsInByZXZTcGVlZCIsIm5leHRTcGVlZCIsInNwZWVkIiwicHJldk5leHQiLCJ2aWRlb0NvbnRyb2xzIiwidmlkZW9CbG9jayIsInZpZGVvQ2xvc2UiLCJ2aWRlb0xpbmUiLCJ2aWRlb1Byb2dyZXNzIiwidmlkZW9SdWxlciIsInZvbHVtZUNoYW5nZSIsInZvbHVtZUxpbmUiLCJ2b2x1bWVQcm9ncmVzcyIsInZvbHVtZVJ1bGVyIiwiY2hhbmdlVGltZSIsInRpbWUiLCJub2xsIiwibnVtIiwiaG91ciIsIk1hdGgiLCJ0cnVuYyIsIm1pbnV0ZSIsInZpZGVvRHVyYXRpb24iLCJpbm5lckhUTUwiLCJ2aWRlb0N1cnJlbnQiLCJzZXRJbnRlcnZhbCIsImN1cnJlbnRUaW1lIiwidmlkZW9QbGF5Iiwib25lbmRlZCIsInN0YXJ0IiwicGF1c2VkIiwicGxheSIsInN0eWxlIiwiekluZGV4IiwicGF1c2UiLCJjbGVhckludGVydmFsIiwicmVtb3ZlIiwib3BhY2l0eSIsInBsYXliYWNrUmF0ZSIsInBsYXlEb3duU3BlZWQiLCJwbGF5VXBTcGVlZCIsImUiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJjb25zb2xlIiwibG9nIiwiYWxlcnQiLCJvbmNsaWNrIiwibXV0ZWQiLCJ2b2x1bWVJY29ucyIsIm9udm9sdW1lY2hhbmdlIiwidm9sdW1lIiwid2lkdGgiLCJ2b2x1bWVJY29uIiwiYWRkIiwib2Zmc2V0WCIsImNsaWVudFgiLCJvZmZzZXRMZWZ0IiwiY2xpZW50V2lkdGgiLCJ3aW5kb3ciLCJvbm1vdXNlbW92ZSIsIlByb1BvcyIsInNjcnViVGltZSIsIm9mZnNldFdpZHRoIiwicmVxdWVzdEZ1bGxzY3JlZW4iLCJleGl0RnVsbHNjcmVlbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUVBLElBQU1BLGlCQUFpQixHQUFPQyxRQUFRLENBQUNDLGdCQUFULENBQTBCLGdDQUExQixDQUE5QjtBQUFBLElBQ01DLGtCQUFrQixHQUFNRixRQUFRLENBQUNDLGdCQUFULENBQTBCLHVDQUExQixDQUQ5QjtBQUdDQyxrQkFBa0IsQ0FBQ0MsT0FBbkIsQ0FBMkIsVUFBQUMsR0FBRztBQUFBLFNBQUlBLEdBQUcsQ0FBQ0MsZ0JBQUosQ0FBcUIsT0FBckIsRUFBOEI7QUFBQSxXQUMvRE4saUJBQWlCLENBQUNJLE9BQWxCLENBQTBCLFVBQUFHLEVBQUU7QUFBQSxhQUFJQSxFQUFFLENBQUNDLFNBQUgsQ0FBYUMsTUFBYixDQUFvQixNQUFwQixDQUFKO0FBQUEsS0FBNUIsQ0FEK0Q7QUFBQSxHQUE5QixDQUFKO0FBQUEsQ0FBOUIsRSxDQUlEOztBQUVBLElBQU1DLEtBQUssR0FBWVQsUUFBUSxDQUFDVSxhQUFULENBQXVCLGlCQUF2QixDQUF2QjtBQUFBLElBQ01DLE9BQU8sR0FBVVgsUUFBUSxDQUFDWSxjQUFULENBQXdCLFNBQXhCLENBRHZCO0FBQUEsSUFFTUMsUUFBUSxHQUFTYixRQUFRLENBQUNZLGNBQVQsQ0FBd0IsVUFBeEIsQ0FGdkI7QUFBQSxJQUdNRSxRQUFRLEdBQVNkLFFBQVEsQ0FBQ1UsYUFBVCxDQUF1Qix3QkFBdkIsQ0FIdkI7QUFBQSxJQUlNSyxTQUFTLEdBQVFmLFFBQVEsQ0FBQ1UsYUFBVCxDQUF1QixrQ0FBdkIsQ0FKdkI7QUFBQSxJQUtNTSxPQUFPLEdBQVVoQixRQUFRLENBQUNVLGFBQVQsQ0FBdUIscUNBQXZCLENBTHZCO0FBQUEsSUFNTU8sU0FBUyxHQUFRakIsUUFBUSxDQUFDVSxhQUFULENBQXVCLHdDQUF2QixD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QUFDRCxDQUhELEUsQ0FLQTs7QUFFQXRFLEtBQUssQ0FBQ0osZ0JBQU4sQ0FBdUIsVUFBdkIsRUFBa0MsWUFBSTtBQUNwQ2lCLEVBQUFBLFVBQVUsQ0FBQzJELGlCQUFYO0FBQ0ExRCxFQUFBQSxVQUFVLENBQUMwQixLQUFYLENBQWlCSyxPQUFqQixHQUEyQixHQUEzQjtBQUNBL0IsRUFBQUEsVUFBVSxDQUFDMEIsS0FBWCxDQUFpQkMsTUFBakIsR0FBMEIsR0FBMUI7QUFDRCxDQUpEO0FBS0EzQixVQUFVLENBQUNsQixnQkFBWCxDQUE0QixPQUE1QixFQUFvQyxZQUFJO0FBQ3RDTCxFQUFBQSxRQUFRLENBQUNrRixjQUFUO0FBQ0EzRCxFQUFBQSxVQUFVLENBQUMwQixLQUFYLENBQWlCSyxPQUFqQixHQUEyQixHQUEzQjtBQUNBL0IsRUFBQUEsVUFBVSxDQUFDMEIsS0FBWCxDQUFpQkMsTUFBakIsR0FBMEIsSUFBMUI7QUFDRCxDQUpEIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbmF2IFxyXG5cclxuY29uc3QgbmF2VG9nZ2xlRWxlbWVudHMgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYWRlcl9fYnRuLCAuaGVhZGVyX19jb250ZW50JyksXHJcbiAgICAgIG5hdkNvbnRyb2xFbGVtZW50cyAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZWFkZXJfX2J0biwgLmhlYWRlcl9fY29udGVudF9fY2xvc2UnKTtcclxuXHJcbiBuYXZDb250cm9sRWxlbWVudHMuZm9yRWFjaChidG4gPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT5cclxuICBuYXZUb2dnbGVFbGVtZW50cy5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKSlcclxuKSlcclxuXHJcbi8vIHZpZGVvXHJcblxyXG5jb25zdCB2aWRlbyAgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWF0dXJlX192aWRlbycpLFxyXG4gICAgICBjdXJyZW50ICAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50JyksXHJcbiAgICAgIGR1cmF0aW9uICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R1cmF0aW9uJyksXHJcbiAgICAgIHBsYXlJY29uICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZlYXR1cmVfX3ZpZGVvc19faWNvbicpLFxyXG4gICAgICBwbGF5UGF1c2UgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWF0dXJlX19jb250cm9sc19fYm90dG9tX19wbGF5JyksXHJcbiAgICAgIHJlc3RhcnQgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZlYXR1cmVfX2NvbnRyb2xzX19ib3R0b21fX3Jlc3RhcnQnKSxcclxuICAgICAgcHJldlNwZWVkICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVhdHVyZV9fY29udHJvbHNfX2JvdHRvbV9fcHJldi1zcGVlZCcpLFxyXG4gICAgICBuZXh0U3BlZWQgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWF0dXJlX19jb250cm9sc19fYm90dG9tX19uZXh0LXNwZWVkJyksXHJcbiAgICAgIHNwZWVkICAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZlYXR1cmVfX3ZpZGVvc19fc3BlZWQnKSxcclxuICAgICAgcHJldk5leHQgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmVhdHVyZV9fY29udHJvbHNfX2JvdHRvbV9fcHJldiwgLmZlYXR1cmVfX2NvbnRyb2xzX19ib3R0b21fX25leHQnKSxcclxuICAgICAgdmlkZW9Db250cm9scyAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVhdHVyZV9fY29udHJvbHMnKSxcclxuICAgICAgdmlkZW9CbG9jayAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVhdHVyZV9fdmlkZW9zJyksXHJcbiAgICAgIHZpZGVvQ2xvc2UgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZlYXR1cmVfX3ZpZGVvc19fY2xvc2UnKSxcclxuICAgICAgdmlkZW9MaW5lICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVhdHVyZV9fY29udHJvbHNfX2xpbmUnKSxcclxuICAgICAgdmlkZW9Qcm9ncmVzcyAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVhdHVyZV9fY29udHJvbHNfX3Byb2dyZXNzJyksXHJcbiAgICAgIHZpZGVvUnVsZXIgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZlYXR1cmVfX2NvbnRyb2xzX19wcm9ncmVzcy1ydWxlcicpLFxyXG4gICAgICB2b2x1bWVDaGFuZ2UgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWF0dXJlX19jb250cm9scy12b2x1bWVfX2ljb24nKSxcclxuICAgICAgdm9sdW1lTGluZSAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVhdHVyZV9fY29udHJvbHMtdm9sdW1lX19saW5lJyksXHJcbiAgICAgIHZvbHVtZVByb2dyZXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZlYXR1cmVfX2NvbnRyb2xzLXZvbHVtZV9fcHJvZ3Jlc3MnKSxcclxuICAgICAgdm9sdW1lUnVsZXIgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVhdHVyZV9fY29udHJvbHMtdm9sdW1lX19ydWxlcicpO1xyXG4gICAgICBcclxuLy8gdmlkZW8gdGltZVxyXG5cclxuZnVuY3Rpb24gY2hhbmdlVGltZSh0aW1lKSB7XHJcbiAgY29uc3Qgbm9sbCA9IG51bSA9PiBudW0gPCAxMCA/ICcwJyArIG51bSA6IG51bVxyXG4gIGxldCBob3VyID0gTWF0aC50cnVuYyh0aW1lIC8gMzYwMClcclxuICB0aW1lIC09IGhvdXIgKiAzNjAwXHJcbiAgbGV0IG1pbnV0ZSA9IE1hdGgudHJ1bmModGltZSAvIDYwKVxyXG4gIHRpbWUgLT0gbWludXRlICogNjBcclxuICB0aW1lID0gTWF0aC50cnVuYyh0aW1lKVxyXG4gIHJldHVybiBgJHtob3VyfToke25vbGwobWludXRlKX06JHtub2xsKHRpbWUpfWBcclxufVxyXG5cclxuZnVuY3Rpb24gdmlkZW9EdXJhdGlvbigpIHtcclxuICByZXR1cm4gZHVyYXRpb24uaW5uZXJIVE1MID0gY2hhbmdlVGltZSh2aWRlby5kdXJhdGlvbilcclxufVxyXG5cclxuZnVuY3Rpb24gdmlkZW9DdXJyZW50KCkge1xyXG4gICBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgIGN1cnJlbnQuaW5uZXJIVE1MID0gY2hhbmdlVGltZSh2aWRlby5jdXJyZW50VGltZSlcclxuIH0sIDEwMDApO1xyXG59XHJcbiAgIFxyXG4vLyB2aWRlbyBwbGF5UGF1c2VcclxuICAgICAgICAgICBcclxucGxheVBhdXNlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e1xyXG4gIHZpZGVvUGxheSgpXHJcbn0pXHJcbnBsYXlJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e1xyXG4gIHZpZGVvUGxheSgpXHJcbn0pXHJcbnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e1xyXG4gIHZpZGVvUGxheSgpXHJcbn0pXHJcbnZpZGVvLm9uZW5kZWQgPSAoKT0+e1xyXG4gIHN0YXJ0KClcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHZpZGVvUGxheSgpIHtcclxuICBwbGF5UGF1c2UuY2xhc3NMaXN0LnRvZ2dsZSgncGF1c2VkJylcclxuICBpZiAodmlkZW8ucGF1c2VkID09PSB0cnVlKSB7XHJcbiAgICB2aWRlby5wbGF5KClcclxuICAgIHZpZGVvRHVyYXRpb24oKVxyXG4gICAgdmlkZW9DdXJyZW50KClcclxuICAgIHBsYXlJY29uLnN0eWxlLnpJbmRleCA9ICctMSdcclxuICB9ZWxzZXtcclxuICAgIHZpZGVvLnBhdXNlKClcclxuICAgIGNsZWFySW50ZXJ2YWwodmlkZW9DdXJyZW50KCkpXHJcbiAgICBwbGF5SWNvbi5zdHlsZS56SW5kZXggPSAnMSdcclxuICB9XHJcbn1cclxuXHJcbi8vIHZpZGVvIHN0b3BcclxuXHJcbnJlc3RhcnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xyXG4gICAgc3RhcnQoKVxyXG4gIH0pXHJcblxyXG5mdW5jdGlvbiBzdGFydCgpIHtcclxuICB2aWRlby5jdXJyZW50VGltZSA9IDBcclxuICB2aWRlby5wYXVzZSgpXHJcbiAgcGxheVBhdXNlLmNsYXNzTGlzdC5yZW1vdmUoJ3BhdXNlZCcpXHJcbiAgc3BlZWQuc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgdmlkZW8ucGxheWJhY2tSYXRlID0gMTtcclxufVxyXG5cclxuLy8gdmlkZW9TcGVlZFxyXG5cclxucHJldlNwZWVkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e1xyXG4gIHBsYXlEb3duU3BlZWQoKVxyXG59KVxyXG5uZXh0U3BlZWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57XHJcbiAgcGxheVVwU3BlZWQoKVxyXG59KVxyXG5cclxuZnVuY3Rpb24gcGxheURvd25TcGVlZCgpIHtcclxuICBpZiAodmlkZW8ucGxheWJhY2tSYXRlID4gMCkge1xyXG4gICAgdmlkZW8ucGxheWJhY2tSYXRlIC09IDAuMjVcclxuICAgIHNwZWVkLmlubmVySFRNTCA9IHZpZGVvLnBsYXliYWNrUmF0ZVxyXG4gIH1cclxuICBpZiAodmlkZW8ucGxheWJhY2tSYXRlID09PSAwKSB7XHJcbiAgICB2aWRlby5wbGF5YmFja1JhdGUgPSAxXHJcbiAgICBzcGVlZC5pbm5lckhUTUwgPSB2aWRlby5wbGF5YmFja1JhdGVcclxuICB9XHJcbiAgaWYgKHZpZGVvLnBsYXliYWNrUmF0ZSA9PT0gMSkge1xyXG4gICAgc3BlZWQuc3R5bGUub3BhY2l0eSA9IDAgXHJcbiAgIH1lbHNle1xyXG4gICAgc3BlZWQuc3R5bGUub3BhY2l0eSA9IDFcclxuICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwbGF5VXBTcGVlZCgpIHtcclxuICBpZiAodmlkZW8ucGxheWJhY2tSYXRlIDwgMikge1xyXG4gICAgdmlkZW8ucGxheWJhY2tSYXRlICs9IDAuMjVcclxuICAgIHNwZWVkLmlubmVySFRNTCA9IHZpZGVvLnBsYXliYWNrUmF0ZVxyXG4gIH1cclxuICBpZiAodmlkZW8ucGxheWJhY2tSYXRlID09PSAyKSB7XHJcbiAgICB2aWRlby5wbGF5YmFja1JhdGUgPSAxXHJcbiAgICBzcGVlZC5pbm5lckhUTUwgPSB2aWRlby5wbGF5YmFja1JhdGVcclxuICB9ICBpZiAodmlkZW8ucGxheWJhY2tSYXRlID09PSAxKSB7XHJcbiAgICBzcGVlZC5zdHlsZS5vcGFjaXR5ID0gMCBcclxuICAgfWVsc2V7XHJcbiAgICBzcGVlZC5zdHlsZS5vcGFjaXR5ID0gMVxyXG4gICB9XHJcbn1cclxuXHJcbi8vIHZpZGVvIHByZXYtbmV4dFxyXG5cclxucHJldk5leHQuZm9yRWFjaChlbCA9PiB7XHJcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChlKT0+e1xyXG4gICAgaWYgKGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImlkXCIpID09PSAncHJldicpIHtcclxuICAgICAgLy8gdmlkZW8ucHJldmlvdXMoKTtcclxuICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiaWRcIikpO1xyXG4gICAgICBhbGVydCgneW91IGhhdmUgbm90IHByZXYgdmlkZW8nKVxyXG4gICAgfVxyXG4gICAgaWYgKGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImlkXCIpID09PSAnbmV4dCcpIHtcclxuICAgICAgLy8gdmlkZW8ubmV4dCgpO1xyXG4gICAgICBhbGVydCgneW91IGhhdmUgbm90IG5leHQgdmlkZW8nKVxyXG4gICAgfVxyXG4gIH0pXHJcbn0pO1xyXG5cclxuLy8gdmlkZW8gdm9sdW1lXHJcblxyXG52b2x1bWVDaGFuZ2Uub25jbGljayA9ICgpPT4gdmlkZW8ubXV0ZWQgPSAhdmlkZW8ubXV0ZWRcclxuXHJcbmNvbnN0IHZvbHVtZUljb25zID0gWyd1cCcsJ3NsYXNoJywnZG93bicsJ25vcm1hbCcsJ29mZicsJ211dGUnXVxyXG5cclxudmlkZW8ub252b2x1bWVjaGFuZ2UgPSAoKT0+e1xyXG4gIGxldCB2b2x1bWUgPSB2aWRlby52b2x1bWUgKiAxMDBcclxuICB2b2x1bWVQcm9ncmVzcy5zdHlsZS53aWR0aCA9IHZpZGVvLnZvbHVtZSAqIDEwMCArICclJ1xyXG4gIHZvbHVtZUljb25zLmZvckVhY2godm9sdW1lSWNvbiA9PiB2b2x1bWVDaGFuZ2UuY2xhc3NMaXN0LnJlbW92ZSh2b2x1bWVJY29uKSlcclxuICBpZiAodmlkZW8ubXV0ZWQpIHtcclxuICAgIHZvbHVtZUNoYW5nZS5jbGFzc0xpc3QuYWRkKCdzbGFzaCcpXHJcbiAgfWVsc2UgaWYgKHZvbHVtZSA+IDc1KSB7XHJcbiAgICB2b2x1bWVDaGFuZ2UuY2xhc3NMaXN0LmFkZCgndXAnKVxyXG4gIH1lbHNlIGlmICh2b2x1bWUgPiA1MCkge1xyXG4gICAgdm9sdW1lQ2hhbmdlLmNsYXNzTGlzdC5hZGQoJ25vcm1hbCcpXHJcbiAgfWVsc2UgaWYgKHZvbHVtZSA+IDI1KSB7XHJcbiAgICB2b2x1bWVDaGFuZ2UuY2xhc3NMaXN0LmFkZCgnZG93bicpXHJcbiAgfWVsc2UgaWYgKHZvbHVtZSA+IDApIHtcclxuICAgIHZvbHVtZUNoYW5nZS5jbGFzc0xpc3QuYWRkKCdvZmYnKVxyXG4gIH1lbHNlIGlmICh2b2x1bWUgPT09IDApIHtcclxuICAgIHZvbHVtZUNoYW5nZS5jbGFzc0xpc3QuYWRkKCdtdXRlJylcclxuICB9XHJcbn1cclxuXHJcbnZvbHVtZUxpbmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChlKT0+e1xyXG4gIGlmIChlLnRhcmdldCAhPT0gdm9sdW1lUnVsZXIpIHtcclxuICAgIHZpZGVvLnZvbHVtZSA9IGUub2Zmc2V0WCAvIDEwMFxyXG4gIH1cclxufSlcclxuXHJcbi8vIHZvbHVtZSBwcm9ncmVzc1xyXG5cclxudm9sdW1lUnVsZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywoZSk9PntcclxuICBpZiAoZS5jbGllbnRYID49IHZvbHVtZUxpbmUub2Zmc2V0TGVmdCAmJiBlLmNsaWVudFggPD0gdm9sdW1lTGluZS5vZmZzZXRMZWZ0ICsgdm9sdW1lTGluZS5jbGllbnRXaWR0aCkge1xyXG4gICAgdmlkZW8udm9sdW1lID0gKGUuY2xpZW50WCAtIHZvbHVtZUxpbmUub2Zmc2V0TGVmdCkgLyAxMDBcclxuICB9XHJcbn0pXHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsKCk9PntcclxuICB3aW5kb3cub25tb3VzZW1vdmUgPSBudWxsXHJcbn0pXHJcblxyXG4vLyB2aWRlbyB2b2x1bWUgcmFuZ2VcclxuXHJcbi8vIEkgaGF2ZSBub3QgdXNlZCBmcm9tIHJhbmdlLiB5b3UgY2FuIHVzZSBpdC4gaXQgaXMgcmVhZHkgZm9yIHdvcmsuIElmIHlvdSBhbSBnb2luZyB0byBzd2ljaCBvbiBpdC4gcGxlYXNlIHJlbW92ZSBhbGwgbm90ZXMuIGF0dGVudGlvbiEhISB5b3UgZG8gYWxsIG9sZCBjb2RlcyB0byBub3RlIHdoaWNoIFwidm9sdW1lX19saW5lLCB2b2x1bWVfX3Byb2dyZXNzLCB2b2x1bWVfX3J1bGVyXCIgaW4gZmVhdHVyZS5wdWdcclxuXHJcbi8vIHZpZGVvVm9sdW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsKGUpPT57XHJcbi8vICAgdmlkZW8udm9sdW1lID0gZS5jdXJyZW50VGFyZ2V0LnZhbHVlIC8gMTAwXHJcbi8vIH0pXHJcblxyXG5cclxuXHJcblxyXG4vLyAvLyB2aWRlbyBwcm9ncmVzc1xyXG5cclxudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsKCk9PntcclxuICBsZXQgUHJvUG9zID0gdmlkZW8uY3VycmVudFRpbWUgLyB2aWRlby5kdXJhdGlvblxyXG4gIHZpZGVvUHJvZ3Jlc3Muc3R5bGUud2lkdGggPSBQcm9Qb3MgKiAxMDAgKyclJ1xyXG59KVxyXG52aWRlb0xpbmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChlKT0+IHtcclxuICBjb25zdCBzY3J1YlRpbWUgPSAoZS5vZmZzZXRYIC8gdmlkZW9MaW5lLm9mZnNldFdpZHRoKSAqIHZpZGVvLmR1cmF0aW9uXHJcbiAgdmlkZW8uY3VycmVudFRpbWUgPSBzY3J1YlRpbWVcclxufSlcclxuXHJcbi8vIHZpZGVvIGZ1bGxzY3JlZW5cclxuXHJcbnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywoKT0+e1xyXG4gIHZpZGVvQmxvY2sucmVxdWVzdEZ1bGxzY3JlZW4oKVxyXG4gIHZpZGVvQ2xvc2Uuc3R5bGUub3BhY2l0eSA9ICcxJ1xyXG4gIHZpZGVvQ2xvc2Uuc3R5bGUuekluZGV4ID0gJzEnXHJcbn0pXHJcbnZpZGVvQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57XHJcbiAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKVxyXG4gIHZpZGVvQ2xvc2Uuc3R5bGUub3BhY2l0eSA9ICcwJ1xyXG4gIHZpZGVvQ2xvc2Uuc3R5bGUuekluZGV4ID0gJy0xJ1xyXG59KSJdLCJmaWxlIjoiY29tbW9uLm1pbi5qcyJ9
